SchemaVersion: "1.0"
Actions:
  Build_6f:
    Identifier: aws/build@v1
    Inputs:
      Sources:
        - WorkflowSource
    Outputs:
      Reports:
        SAMPLE_REPORT:
          IncludePaths:
            - report.xml
          Format: JUNITXML
        MendReport:
          Format: SARIFSCA
          IncludePaths:
            - report.sarif
      AutoDiscoverReports:
        Enabled: false
    Configuration:
      Steps:
        - Run: wget -O unified-agent.jar https://unified-agent.s3.amazonaws.com/Snapshot/unified-agent-sarif-support.jar
        - Run: java -jar ${Secrets.UA_JAR} -licenseKey ${Secrets.MEND_LICENSE_KEY}
            -generateSarifReport true -project sarif-report -product
            sarif-support
        - Run: cat report.sarif
